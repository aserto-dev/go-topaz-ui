"use strict";(self.webpackChunkself_hosted_console=self.webpackChunkself_hosted_console||[]).push([[5021],{15021:function(e,n,r){r.r(n),r.d(n,{default:function(){return L}});var i,o,t,d,l,c,a,s,u,v,f,y,h,p=r(36222),x=r(18489),g=r(50678),m=r(76998),j=r.n(m),C=r(72791),S=r(57689),b=r(65996),Z=r(91933),A=r(64749),U=r(17186),k=r(89854),z=k.ZP.div(i||(i=(0,U.Z)(["\n  padding: 20px;\n  width: 100%;\n  height: fit-content;\n"]))),w=k.ZP.div(o||(o=(0,U.Z)(["\n  font-size: 16px;\n"]))),T=(k.ZP.div(t||(t=(0,U.Z)(["\n  display: flex;\n  font-weight: ",";\n"])),(function(e){return e.bold?"bold":500})),k.ZP.div(d||(d=(0,U.Z)(["\n  input {\n    width: 600px;\n  }\n"]))),k.ZP.div(l||(l=(0,U.Z)(["\n  width: 100%;\n  flex: 1 1 0%;\n  justify-content: flex-start;\n  align-items: flex-start;\n  float: right;\n  display: flex;\n  margin-top: 60px;\n  button:first-of-type {\n    margin-right: 10px;\n  }\n"])))),D=r(80184),I=function(e){var n=e.onHide,r=e.show,i=e.subject,o=e.onClickRemove,t=n;return(0,D.jsx)(D.Fragment,{children:(0,D.jsx)(b.AY,{cardHeight:"100%",show:r,title:"Delete ".concat(i),variant:"delete_danger",onHide:t,children:(0,D.jsxs)(z,{children:[(0,D.jsxs)(w,{children:["Are you sure you want to delete your ",i,"?"]}),(0,D.jsxs)(T,{children:[(0,D.jsx)(b.zx,{variant:"secondary",onClick:t,children:"Cancel"}),(0,D.jsx)(b.zx,{"data-testid":"delete-subject",variant:"danger",onClick:o,children:"Delete"})]})]})})})},K=/^(https?:\/\/[a-zA-Z0-9.-]+:\d+(\/[a-zA-Z0-9_/]+)?)$/,P=function(e){return K.test(e)?"VALID":"INVALID"},G={getValidityOf:P,isValid:function(e){return"VALID"===P(e)},ruleText:"Should be formed of an address and a port from topaz. It can be either https or http."},M=r(11717),R=r(38174),E=k.ZP.div(c||(c=(0,U.Z)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin: 1rem 6rem;\n  input {\n    width: 700px;\n  }\n  label {\n    font-size: 14px;\n  }\n"]))),H=(0,k.ZP)(E)(a||(a=(0,U.Z)(["\n  margin: 0rem 6rem;\n"]))),V=k.ZP.div(s||(s=(0,U.Z)(["\n  margin-top: 2rem;\n"]))),_=k.ZP.div(u||(u=(0,U.Z)(["\n  margin-bottom: 60px;\n"]))),F=(k.ZP.div(v||(v=(0,U.Z)(["\n  margin-top: 80px;\n  margin-left: 80px;\n  flex-direction: column;\n  font-family: Roboto;\n  width: 80%;\n  padding: 20px;\n  @media (max-width: 812px) {\n    display: block;\n    width: 100%;\n  }\n"]))),k.ZP.div(f||(f=(0,U.Z)(["\n  font-weight: ",";\n  font-size: ",";\n  color: ",";\n  padding-top: 8px;\n"])),(function(e){return e.bold?"bold":100}),(function(e){return e.size}),(function(e){return e.color})),k.ZP.div(y||(y=(0,U.Z)(["\n  margin-top: 12px;\n  display: flex;\n  margin-left: 100px;\n  gap: 10px;\n"])))),W=k.ZP.div(h||(h=(0,U.Z)(["\n  width: 700px;\n"]))),N="auto",B="manual",L=function(){var e=(0,A.mX)().data,n=(0,M.G)(),r=n.configurationName,i=n.setConfigurationName,o=(0,C.useState)(N),t=(0,g.Z)(o,2),d=t[0],l=t[1],c=(0,C.useState)(""),a=(0,g.Z)(c,2),s=a[0],u=a[1],v=(0,C.useState)(!1),f=(0,g.Z)(v,2),y=f[0],h=f[1],m=(0,C.useState)({authorizerServiceUrl:"",authorizerApiKey:"",directoryServiceUrl:"",directoryApiKey:"",directoryTenantId:"",directoryReaderServiceUrl:"",directoryWriterServiceUrl:"",directoryModelServiceUrl:""}),U=(0,g.Z)(m,2),k=U[0],z=U[1],w=function(e){var n=e.target,r=n.name,i=n.value;z((function(e){return(0,x.Z)((0,x.Z)({},e),{},(0,p.Z)({},r,i))}))},T=(0,C.useState)(!1),K=(0,g.Z)(T,2),P=K[0],L=K[1],O=function(e,n){var r=(0,b.eB)(e).get;return(0,Z.useQuery)([e],(function(){return r({path:""})}),(0,x.Z)((0,x.Z)({},n),{},{enabled:!!e&&(null===n||void 0===n?void 0:n.enabled),retry:!1,staleTime:1/0}))}(s,{enabled:!1,onError:function(e){$(e)},onSuccess:function(){q("Configuration generated successfully.")}}),Q=O.data,X=O.refetch,Y=(0,S.TH)(),$=(0,b.dV)(),q=(0,b.ze)(),J=function(){L(!0)},ee=(0,C.useMemo)((function(){var n;return null===e||void 0===e||null===(n=e.configs)||void 0===n?void 0:n.find((function(e){return e.name===r}))}),[r,null===e||void 0===e?void 0:e.configs]),ne=[{label:"Automatic",value:N},{label:"Manual",value:B},{label:"Central Directory",value:"central_directory"}],re=(0,A.Nn)({onError:function(e){$(e)},onSuccess:function(){q("Configuration updated successfully.")}}).mutate,ie=(0,A.Mj)({onSuccess:function(){var n,o;q("Configuration deleted successfully.");var t=null===(n=((null===e||void 0===e||null===(o=e.configs)||void 0===o?void 0:o.filter((function(e){return e.name!==r})))||[])[0])||void 0===n?void 0:n.name;i(t||"")},onError:function(e){$(e)}}),oe=ie.mutateAsync,te=(0,C.useMemo)((function(){return(null===Q||void 0===Q?void 0:Q.configs)||[]}),[null===Q||void 0===Q?void 0:Q.configs]),de=(0,C.useMemo)((function(){return G.isValid(s)}),[s]);if((0,C.useEffect)((function(){null!==ee&&void 0!==ee&&ee.configurationType&&l(null===ee||void 0===ee?void 0:ee.configurationType)}),[null===ee||void 0===ee?void 0:ee.configurationType,l]),(0,C.useEffect)((function(){ee&&z(ee)}),[ee,z]),(0,C.useEffect)((function(){null!==ee&&void 0!==ee&&ee.address&&u(ee.address)}),[,null===ee||void 0===ee?void 0:ee.address,u]),(0,C.useEffect)((function(){te.length>0&&(z(te[0]),h(!0))}),[te,z,h]),(0,C.useEffect)((function(){var e,n;null!==(e=Y.state)&&void 0!==e&&e.configuration&&Object.keys(ee||{}).sort().toString()===["name"].toString()&&(l(N),u(""),h(!1),z(null===(n=Y.state)||void 0===n?void 0:n.configuration))}),[Y.state,z,l,u,h,ee]),(0,C.useEffect)((function(){null!==ee&&void 0!==ee&&ee.address&&h(!0)}),[null===ee||void 0===ee?void 0:ee.address,h]),!e||!e.configs||0===e.configs.length)return(0,D.jsx)(R.Z,{});var le=(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(E,{children:(0,D.jsx)(b.Gc,{disabled:d===N,label:"Directory Service Address",name:"directoryServiceUrl",value:k.directoryServiceUrl,onChange:w,onClickCopy:j()})}),(0,D.jsx)(E,{children:(0,D.jsx)(b.Gc,{disabled:d===N,label:"Directory API Key",name:"directoryApiKey",placeholder:null!==k&&void 0!==k&&k.directoryApiKey?"****************************************************************":"",shouldShowHideShowButton:!0,type:"password",value:k.directoryApiKey,onChange:w,onClickCopy:j()})}),(0,D.jsx)(E,{children:(0,D.jsx)(b.Gc,{disabled:d===N,label:"Director Tenant ID",name:"directoryTenantId",value:k.directoryTenantId,onChange:w,onClickCopy:j()})}),(0,D.jsx)(E,{children:(0,D.jsx)(b.Gc,{disabled:d===N,label:"Authorizer Service Address",name:"authorizerServiceUrl",value:k.authorizerServiceUrl,onChange:w,onClickCopy:j()})}),(0,D.jsx)(E,{children:(0,D.jsx)(b.Gc,{disabled:d===N,label:"Authorizer API Key",name:"authorizerApiKey",placeholder:null!==k&&void 0!==k&&k.authorizerApiKey?"****************************************************************":"",shouldShowHideShowButton:!0,type:"password",value:k.authorizerApiKey,onChange:w,onClickCopy:j()})}),(0,D.jsx)(E,{children:(0,D.jsx)(b.Gc,{disabled:d===N,label:"Directory Reader Service Address",name:"directoryReaderServiceUrl",value:k.directoryReaderServiceUrl,onChange:w,onClickCopy:j()})}),(0,D.jsx)(E,{children:(0,D.jsx)(b.Gc,{disabled:d===N,label:"Directory Writer Service Address",name:"directoryWriterServiceUrl",value:k.directoryWriterServiceUrl,onChange:w,onClickCopy:j()})}),(0,D.jsx)(E,{children:(0,D.jsx)(b.Gc,{disabled:d===N,label:"Directory Model Service Address",name:"directoryModelServiceUrl",value:k.directoryModelServiceUrl,onChange:w,onClickCopy:j()})}),(0,D.jsxs)(F,{children:[(0,D.jsx)(b.zx,{onClick:function(){return re({name:r,fields:{configurationType:d,name:r,address:s,directoryServiceUrl:k.directoryServiceUrl,authorizerServiceUrl:k.authorizerServiceUrl,authorizerApiKey:k.authorizerApiKey,directoryApiKey:k.directoryApiKey,directoryTenantId:k.directoryTenantId,directoryReaderServiceUrl:k.directoryReaderServiceUrl,directoryWriterServiceUrl:k.directoryWriterServiceUrl,directoryModelServiceUrl:k.directoryModelServiceUrl}})},children:"Save"}),(0,D.jsx)(b.zx,{variant:"danger",onClick:J,children:"Delete"})]})]});return(0,D.jsxs)(b.RF,{children:[(0,D.jsx)(E,{children:(0,D.jsx)(b.Gc,{disabled:!0,label:"Configuration Name",value:r,onClickCopy:j()})}),(0,D.jsx)(E,{children:(0,D.jsxs)(W,{children:[(0,D.jsx)("p",{children:"Configuration Type:"}),(0,D.jsx)(b.Ph,{options:ne,style:{width:"700px"},value:ne.find((function(e){return e.value===d}))||ne[0],onChange:function(e){var n=String(null===e||void 0===e?void 0:e.value);n===N&&z(ee||{}),l(n)}})]})}),(0,D.jsx)(I,{redirectUrl:"/",show:P,subject:"Configuration",onClickRemove:function(){!function(e){e&&oe(e)}(r),L(!1)},onHide:function(){return L(!1)}}),(0,D.jsx)(V,{children:d===N?(0,D.jsxs)(V,{children:[d===N&&(0,D.jsxs)(_,{children:[(0,D.jsx)(H,{children:(0,D.jsx)(b.as,{label:"Configuration address",placeholder:"https://localhost:8080",validator:G,value:s,onChange:u,onClickCopy:j()})}),(0,D.jsxs)(F,{children:[(0,D.jsx)(b.zx,{disabled:!de,onClick:function(){X()},children:"Generate configuration"}),!(null!==Q&&void 0!==Q&&Q.success)&&!(null!==ee&&void 0!==ee&&ee.address)&&(0,D.jsx)(b.zx,{variant:"danger",onClick:J,children:"Delete"})]})]}),y?le:(0,D.jsx)(D.Fragment,{})]}):d===B?le:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(E,{children:(0,D.jsx)(b.Gc,{label:"Directory Service Address",name:"directoryServiceUrl",value:k.directoryServiceUrl,onChange:w,onClickCopy:j()})}),(0,D.jsx)(E,{children:(0,D.jsx)(b.Gc,{label:"Directory API Key",name:"directoryApiKey",shouldShowHideShowButton:!0,type:"password",value:k.directoryApiKey,onChange:w,onClickCopy:j()})}),(0,D.jsx)(E,{children:(0,D.jsx)(b.Gc,{label:"Directory Tenant ID",name:"directoryTenantId",value:k.directoryTenantId,onChange:w,onClickCopy:j()})}),(0,D.jsxs)(F,{children:[(0,D.jsx)(b.zx,{disabled:!k.directoryTenantId||!k.directoryServiceUrl||!k.directoryApiKey,onClick:function(){return re({name:r,fields:{configurationType:d,name:r,directoryServiceUrl:k.directoryServiceUrl,directoryApiKey:k.directoryApiKey,directoryTenantId:k.directoryTenantId}})},children:"Save"}),(0,D.jsx)(b.zx,{variant:"danger",onClick:J,children:"Delete"})]})]})})]})}},38174:function(e,n,r){r.d(n,{Z:function(){return d}});r(72791);var i=r(65996);var o=r.p+"static/media/no-users.608b3a7e4f53bf42798a4f2a5be4c011.svg",t=r(80184),d=function(){return(0,t.jsx)(i.RF,{children:(0,t.jsx)(i.Pc,{body:'To add one, click the "Add" button in the dropdown .',header:"Could not find any configuration",imgAlt:"Empty Directory",imgSrc:o})})}}}]);
//# sourceMappingURL=5021.442875bb.chunk.js.map
"use strict";(self.webpackChunkself_hosted_console=self.webpackChunkself_hosted_console||[]).push([[5021],{15021:(e,r,i)=>{i.r(r),i.d(r,{default:()=>H});var n=i(76998),o=i.n(n),t=i(72791),l=i(57689),d=i(14658),a=i(91933);var c,s,u,v=i(31068),y=i(30168),h=i(89854);const x=h.ZP.div(c||(c=(0,y.Z)(["\n  padding: 20px;\n  width: 100%;\n  height: fit-content;\n"]))),p=h.ZP.div(s||(s=(0,y.Z)(["\n  font-size: 16px;\n"]))),g=h.ZP.div(u||(u=(0,y.Z)(["\n  width: 100%;\n  flex: 1 1 0%;\n  justify-content: flex-start;\n  align-items: flex-start;\n  float: right;\n  display: flex;\n  margin-top: 60px;\n  button:first-of-type {\n    margin-right: 10px;\n  }\n"])));var f=i(80184);const C=e=>{let{onHide:r,show:i,subject:n,onClickRemove:o}=e;const t=r;return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(d.AY,{cardHeight:"100%",show:i,title:"Delete ".concat(n),variant:"delete_danger",onHide:t,children:(0,f.jsxs)(x,{children:[(0,f.jsxs)(p,{children:["Are you sure you want to delete your ",n,"?"]}),(0,f.jsxs)(g,{children:[(0,f.jsx)(d.zx,{variant:"secondary",onClick:t,children:"Cancel"}),(0,f.jsx)(d.zx,{"data-testid":"delete-subject",variant:"danger",onClick:o,children:"Delete"})]})]})})})},j=/^(https?:\/\/[a-zA-Z0-9.-]+:\d+(\/[a-zA-Z0-9_/]+)?)$/,m=e=>j.test(e)?"VALID":"INVALID",S={getValidityOf:m,isValid:e=>"VALID"===m(e),ruleText:"Should be formed of an address and a port from topaz. It can be either https or http."};var b,A,k,U,z,w,T=i(11717),Z=i(38174);const D=h.ZP.div(b||(b=(0,y.Z)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin: 1rem 6rem;\n  input {\n    width: 700px;\n  }\n  label {\n    font-size: 14px;\n  }\n"]))),I=(0,h.ZP)(D)(A||(A=(0,y.Z)(["\n  margin: 0rem 6rem;\n"]))),K=h.ZP.div(k||(k=(0,y.Z)(["\n  margin-top: 2rem;\n"]))),G=h.ZP.div(U||(U=(0,y.Z)(["\n  margin-bottom: 60px;\n"]))),P=h.ZP.div(z||(z=(0,y.Z)(["\n  margin-top: 12px;\n  display: flex;\n  margin-left: 100px;\n  gap: 10px;\n"]))),M=h.ZP.div(w||(w=(0,y.Z)(["\n  width: 700px;\n"]))),E="auto",R="manual",H=()=>{const{data:e}=(0,v.mX)(),{configurationName:r,setConfigurationName:i}=(0,T.Gt)(),[n,c]=(0,t.useState)(E),[s,u]=(0,t.useState)(""),[y,h]=(0,t.useState)(""),[x,p]=(0,t.useState)(!1),[g,j]=(0,t.useState)({authorizerServiceUrl:"",authorizerApiKey:"",directoryServiceUrl:"",directoryApiKey:"",directoryTenantId:"",directoryReaderServiceUrl:"",directoryWriterServiceUrl:"",directoryModelServiceUrl:""}),m=e=>{const{name:r,value:i}=e.target;j((e=>({...e,[r]:i})))},[b,A]=(0,t.useState)(!1),{data:k,refetch:U}=((e,r,i)=>{const{get:n}=(0,d.eB)(e);return(0,a.useQuery)([e],(()=>n({path:"",headerOverrides:r?{authorization:"Basic ".concat(r)}:void 0})),{...i,enabled:!!e&&(null===i||void 0===i?void 0:i.enabled),retry:!1,staleTime:1/0})})(s,y,{enabled:!1,onError:e=>{w(e)},onSuccess:()=>{H("Configuration generated successfully.")}}),z=(0,l.TH)(),w=(0,d.dV)(),H=(0,d.ze)(),V=()=>{A(!0)},_=(0,t.useMemo)((()=>{var i;return null===e||void 0===e||null===(i=e.configs)||void 0===i?void 0:i.find((e=>e.name===r))}),[r,null===e||void 0===e?void 0:e.configs]),B=[{label:"Automatic",value:E},{label:"Manual",value:R},{label:"Central Directory",value:"central_directory"}],{mutate:F}=(0,v.Nn)({onError:e=>{w(e)},onSuccess:()=>{H("Configuration updated successfully.")}}),{mutateAsync:W}=(0,v.Mj)({onSuccess:()=>{var n,o;H("Configuration deleted successfully.");const t=null===(n=((null===e||void 0===e||null===(o=e.configs)||void 0===o?void 0:o.filter((e=>e.name!==r)))||[])[0])||void 0===n?void 0:n.name;i(t||"")},onError:e=>{w(e)}}),N=(0,t.useMemo)((()=>(null===k||void 0===k?void 0:k.configs)||[]),[null===k||void 0===k?void 0:k.configs]),L=(0,t.useMemo)((()=>S.isValid(s)),[s]);if((0,t.useEffect)((()=>{null!==_&&void 0!==_&&_.configurationType&&c(null===_||void 0===_?void 0:_.configurationType)}),[null===_||void 0===_?void 0:_.configurationType,c]),(0,t.useEffect)((()=>{_&&j(_)}),[_,j]),(0,t.useEffect)((()=>{null!==_&&void 0!==_&&_.address&&u(_.address)}),[,null===_||void 0===_?void 0:_.address,u]),(0,t.useEffect)((()=>{N.length>0&&(j(N[0]),p(!0))}),[N,j,p]),(0,t.useEffect)((()=>{var e,r;null!==(e=z.state)&&void 0!==e&&e.configuration&&Object.keys(_||{}).sort().toString()===["name"].toString()&&(c(E),u(""),h(""),p(!1),j(null===(r=z.state)||void 0===r?void 0:r.configuration))}),[z.state,j,c,u,p,_]),(0,t.useEffect)((()=>{null!==_&&void 0!==_&&_.address&&p(!0)}),[null===_||void 0===_?void 0:_.address,p]),!e||!e.configs||0===e.configs.length)return(0,f.jsx)(Z.Z,{});const O=(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(D,{children:(0,f.jsx)(d.Gc,{disabled:n===E,label:"Directory Service Address",name:"directoryServiceUrl",value:g.directoryServiceUrl,onChange:m,onClickCopy:o()})}),(0,f.jsx)(D,{children:(0,f.jsx)(d.Gc,{disabled:n===E,label:"Directory API Key",name:"directoryApiKey",placeholder:null!==g&&void 0!==g&&g.directoryApiKey?"****************************************************************":"",shouldShowHideShowButton:!0,type:"password",value:g.directoryApiKey,onChange:m,onClickCopy:o()})}),(0,f.jsx)(D,{children:(0,f.jsx)(d.Gc,{disabled:n===E,label:"Director Tenant ID",name:"directoryTenantId",value:g.directoryTenantId,onChange:m,onClickCopy:o()})}),(0,f.jsx)(D,{children:(0,f.jsx)(d.Gc,{disabled:n===E,label:"Authorizer Service Address",name:"authorizerServiceUrl",value:g.authorizerServiceUrl,onChange:m,onClickCopy:o()})}),(0,f.jsx)(D,{children:(0,f.jsx)(d.Gc,{disabled:n===E,label:"Authorizer API Key",name:"authorizerApiKey",placeholder:null!==g&&void 0!==g&&g.authorizerApiKey?"****************************************************************":"",shouldShowHideShowButton:!0,type:"password",value:g.authorizerApiKey,onChange:m,onClickCopy:o()})}),(0,f.jsx)(D,{children:(0,f.jsx)(d.Gc,{disabled:n===E,label:"Directory Reader Service Address",name:"directoryReaderServiceUrl",value:g.directoryReaderServiceUrl,onChange:m,onClickCopy:o()})}),(0,f.jsx)(D,{children:(0,f.jsx)(d.Gc,{disabled:n===E,label:"Directory Writer Service Address",name:"directoryWriterServiceUrl",value:g.directoryWriterServiceUrl,onChange:m,onClickCopy:o()})}),(0,f.jsx)(D,{children:(0,f.jsx)(d.Gc,{disabled:n===E,label:"Directory Model Service Address",name:"directoryModelServiceUrl",value:g.directoryModelServiceUrl,onChange:m,onClickCopy:o()})}),(0,f.jsxs)(P,{children:[(0,f.jsx)(d.zx,{onClick:()=>F({name:r,fields:{configurationType:n,name:r,address:s,directoryServiceUrl:g.directoryServiceUrl,authorizerServiceUrl:g.authorizerServiceUrl,authorizerApiKey:g.authorizerApiKey,directoryApiKey:g.directoryApiKey,directoryTenantId:g.directoryTenantId,directoryReaderServiceUrl:g.directoryReaderServiceUrl,directoryWriterServiceUrl:g.directoryWriterServiceUrl,directoryModelServiceUrl:g.directoryModelServiceUrl}}),children:"Save"}),(0,f.jsx)(d.zx,{variant:"danger",onClick:V,children:"Delete"})]})]});return(0,f.jsxs)(d.RF,{children:[(0,f.jsx)(D,{children:(0,f.jsx)(d.Gc,{disabled:!0,label:"Configuration Name",value:r,onClickCopy:o()})}),(0,f.jsx)(D,{children:(0,f.jsx)(M,{children:(0,f.jsx)(d.Ph,{label:"Configuration Type",options:B,style:{width:"700px"},value:B.find((e=>e.value===n))||B[0],onChange:e=>{const r=String(null===e||void 0===e?void 0:e.value);r===E&&j(_),c(r)}})})}),(0,f.jsx)(C,{redirectUrl:"/",show:b,subject:"Configuration",onClickRemove:()=>{(e=>{e&&W(e)})(r),A(!1)},onHide:()=>A(!1)}),(0,f.jsx)(K,{children:n===E?(0,f.jsxs)(K,{children:[n===E&&(0,f.jsxs)(G,{children:[(0,f.jsx)(I,{children:(0,f.jsx)(d.as,{label:"Configuration address",placeholder:"https://localhost:8080",validator:S,value:s,onChange:u,onClickCopy:o()})}),(0,f.jsx)(D,{children:(0,f.jsx)(d.Gc,{label:"API key(required only for an address that has authentication enabled)",shouldShowHideShowButton:!0,type:"password",value:y,onChange:e=>{h(e.target.value)},onClickCopy:o()})}),(0,f.jsxs)(P,{children:[(0,f.jsx)(d.zx,{disabled:!L,onClick:()=>{U()},children:"Generate configuration"}),!(null!==k&&void 0!==k&&k.success)&&!(null!==_&&void 0!==_&&_.address)&&(0,f.jsx)(d.zx,{variant:"danger",onClick:V,children:"Delete"})]})]}),x?O:(0,f.jsx)(f.Fragment,{})]}):n===R?O:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(D,{children:(0,f.jsx)(d.Gc,{label:"Directory Service Address",name:"directoryServiceUrl",value:g.directoryServiceUrl,onChange:m,onClickCopy:o()})}),(0,f.jsx)(D,{children:(0,f.jsx)(d.Gc,{label:"Directory API Key",name:"directoryApiKey",shouldShowHideShowButton:!0,type:"password",value:g.directoryApiKey,onChange:m,onClickCopy:o()})}),(0,f.jsx)(D,{children:(0,f.jsx)(d.Gc,{label:"Directory Tenant ID",name:"directoryTenantId",value:g.directoryTenantId,onChange:m,onClickCopy:o()})}),(0,f.jsxs)(P,{children:[(0,f.jsx)(d.zx,{disabled:!g.directoryTenantId||!g.directoryServiceUrl||!g.directoryApiKey,onClick:()=>F({name:r,fields:{configurationType:n,name:r,directoryServiceUrl:g.directoryServiceUrl,directoryApiKey:g.directoryApiKey,directoryTenantId:g.directoryTenantId}}),children:"Save"}),(0,f.jsx)(d.zx,{variant:"danger",onClick:V,children:"Delete"})]})]})})]})}},38174:(e,r,i)=>{i.d(r,{Z:()=>l});i(72791);var n=i(14658);const o=i.p+"static/media/no-users.608b3a7e4f53bf42798a4f2a5be4c011.svg";var t=i(80184);const l=()=>(0,t.jsx)(n.RF,{children:(0,t.jsx)(n.Pc,{body:'To add one, click the "Add" button in the dropdown .',header:"Could not find any configuration",imgAlt:"Empty Directory",imgSrc:o})})}}]);
//# sourceMappingURL=5021.3287c633.chunk.js.map
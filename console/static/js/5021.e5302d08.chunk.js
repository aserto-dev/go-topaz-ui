"use strict";(self.webpackChunkself_hosted_console=self.webpackChunkself_hosted_console||[]).push([[5021],{15021:function(e,n,r){r.r(n),r.d(n,{default:function(){return L}});var i,o,t,d,l,c,a,s,u,v,f,y,h,p=r(36222),x=r(18489),g=r(50678),m=r(76998),C=r.n(m),j=r(72791),S=r(57689),b=r(87542),Z=r(91933),A=r(31068),k=r(17186),w=r(89854),U=w.ZP.div(i||(i=(0,k.Z)(["\n  padding: 20px;\n  width: 100%;\n  height: fit-content;\n"]))),z=w.ZP.div(o||(o=(0,k.Z)(["\n  font-size: 16px;\n"]))),T=(w.ZP.div(t||(t=(0,k.Z)(["\n  display: flex;\n  font-weight: ",";\n"])),(function(e){return e.bold?"bold":500})),w.ZP.div(d||(d=(0,k.Z)(["\n  input {\n    width: 600px;\n  }\n"]))),w.ZP.div(l||(l=(0,k.Z)(["\n  width: 100%;\n  flex: 1 1 0%;\n  justify-content: flex-start;\n  align-items: flex-start;\n  float: right;\n  display: flex;\n  margin-top: 60px;\n  button:first-of-type {\n    margin-right: 10px;\n  }\n"])))),D=r(80184),I=function(e){var n=e.onHide,r=e.show,i=e.subject,o=e.onClickRemove,t=n;return(0,D.jsx)(D.Fragment,{children:(0,D.jsx)(b.AY,{cardHeight:"100%",show:r,title:"Delete ".concat(i),variant:"delete_danger",onHide:t,children:(0,D.jsxs)(U,{children:[(0,D.jsxs)(z,{children:["Are you sure you want to delete your ",i,"?"]}),(0,D.jsxs)(T,{children:[(0,D.jsx)(b.zx,{variant:"secondary",onClick:t,children:"Cancel"}),(0,D.jsx)(b.zx,{"data-testid":"delete-subject",variant:"danger",onClick:o,children:"Delete"})]})]})})})},K=/^(https?:\/\/[a-zA-Z0-9.-]+:\d+(\/[a-zA-Z0-9_/]+)?)$/,P=function(e){return K.test(e)?"VALID":"INVALID"},G={getValidityOf:P,isValid:function(e){return"VALID"===P(e)},ruleText:"Should be formed of an address and a port from topaz. It can be either https or http."},M=r(11717),R=r(38174),E=w.ZP.div(c||(c=(0,k.Z)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin: 1rem 6rem;\n  input {\n    width: 700px;\n  }\n  label {\n    font-size: 14px;\n  }\n"]))),H=(0,w.ZP)(E)(a||(a=(0,k.Z)(["\n  margin: 0rem 6rem;\n"]))),V=w.ZP.div(s||(s=(0,k.Z)(["\n  margin-top: 2rem;\n"]))),_=w.ZP.div(u||(u=(0,k.Z)(["\n  margin-bottom: 60px;\n"]))),B=(w.ZP.div(v||(v=(0,k.Z)(["\n  margin-top: 80px;\n  margin-left: 80px;\n  flex-direction: column;\n  font-family: Roboto;\n  width: 80%;\n  padding: 20px;\n  @media (max-width: 812px) {\n    display: block;\n    width: 100%;\n  }\n"]))),w.ZP.div(f||(f=(0,k.Z)(["\n  font-weight: ",";\n  font-size: ",";\n  color: ",";\n  padding-top: 8px;\n"])),(function(e){return e.bold?"bold":100}),(function(e){return e.size}),(function(e){return e.color})),w.ZP.div(y||(y=(0,k.Z)(["\n  margin-top: 12px;\n  display: flex;\n  margin-left: 100px;\n  gap: 10px;\n"])))),F=w.ZP.div(h||(h=(0,k.Z)(["\n  width: 700px;\n"]))),W="auto",N="manual",L=function(){var e=(0,A.mX)().data,n=(0,M.Gt)(),r=n.configurationName,i=n.setConfigurationName,o=(0,j.useState)(W),t=(0,g.Z)(o,2),d=t[0],l=t[1],c=(0,j.useState)(""),a=(0,g.Z)(c,2),s=a[0],u=a[1],v=(0,j.useState)(""),f=(0,g.Z)(v,2),y=f[0],h=f[1],m=(0,j.useState)(!1),k=(0,g.Z)(m,2),w=k[0],U=k[1],z=(0,j.useState)({authorizerServiceUrl:"",authorizerApiKey:"",directoryServiceUrl:"",directoryApiKey:"",directoryTenantId:"",directoryReaderServiceUrl:"",directoryWriterServiceUrl:"",directoryModelServiceUrl:""}),T=(0,g.Z)(z,2),K=T[0],P=T[1],L=function(e){var n=e.target,r=n.name,i=n.value;P((function(e){return(0,x.Z)((0,x.Z)({},e),{},(0,p.Z)({},r,i))}))},O=(0,j.useState)(!1),q=(0,g.Z)(O,2),Q=q[0],X=q[1],Y=function(e,n,r){var i=(0,b.eB)(e).get;return(0,Z.useQuery)([e],(function(){return i({path:"",headerOverrides:n?{authorization:"Basic ".concat(n)}:void 0})}),(0,x.Z)((0,x.Z)({},r),{},{enabled:!!e&&(null===r||void 0===r?void 0:r.enabled),retry:!1,staleTime:1/0}))}(s,y,{enabled:!1,onError:function(e){ne(e)},onSuccess:function(){re("Configuration generated successfully.")}}),$=Y.data,J=Y.refetch,ee=(0,S.TH)(),ne=(0,b.dV)(),re=(0,b.ze)(),ie=function(){X(!0)},oe=(0,j.useMemo)((function(){var n;return null===e||void 0===e||null===(n=e.configs)||void 0===n?void 0:n.find((function(e){return e.name===r}))}),[r,null===e||void 0===e?void 0:e.configs]),te=[{label:"Automatic",value:W},{label:"Manual",value:N},{label:"Central Directory",value:"central_directory"}],de=(0,A.Nn)({onError:function(e){ne(e)},onSuccess:function(){re("Configuration updated successfully.")}}).mutate,le=(0,A.Mj)({onSuccess:function(){var n,o;re("Configuration deleted successfully.");var t=null===(n=((null===e||void 0===e||null===(o=e.configs)||void 0===o?void 0:o.filter((function(e){return e.name!==r})))||[])[0])||void 0===n?void 0:n.name;i(t||"")},onError:function(e){ne(e)}}),ce=le.mutateAsync,ae=(0,j.useMemo)((function(){return(null===$||void 0===$?void 0:$.configs)||[]}),[null===$||void 0===$?void 0:$.configs]),se=(0,j.useMemo)((function(){return G.isValid(s)}),[s]);if((0,j.useEffect)((function(){null!==oe&&void 0!==oe&&oe.configurationType&&l(null===oe||void 0===oe?void 0:oe.configurationType)}),[null===oe||void 0===oe?void 0:oe.configurationType,l]),(0,j.useEffect)((function(){oe&&P(oe)}),[oe,P]),(0,j.useEffect)((function(){null!==oe&&void 0!==oe&&oe.address&&u(oe.address)}),[,null===oe||void 0===oe?void 0:oe.address,u]),(0,j.useEffect)((function(){ae.length>0&&(P(ae[0]),U(!0))}),[ae,P,U]),(0,j.useEffect)((function(){var e,n;null!==(e=ee.state)&&void 0!==e&&e.configuration&&Object.keys(oe||{}).sort().toString()===["name"].toString()&&(l(W),u(""),h(""),U(!1),P(null===(n=ee.state)||void 0===n?void 0:n.configuration))}),[ee.state,P,l,u,U,oe]),(0,j.useEffect)((function(){null!==oe&&void 0!==oe&&oe.address&&U(!0)}),[null===oe||void 0===oe?void 0:oe.address,U]),!e||!e.configs||0===e.configs.length)return(0,D.jsx)(R.Z,{});var ue=(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(E,{children:(0,D.jsx)(b.Gc,{disabled:d===W,label:"Directory Service Address",name:"directoryServiceUrl",value:K.directoryServiceUrl,onChange:L,onClickCopy:C()})}),(0,D.jsx)(E,{children:(0,D.jsx)(b.Gc,{disabled:d===W,label:"Directory API Key",name:"directoryApiKey",placeholder:null!==K&&void 0!==K&&K.directoryApiKey?"****************************************************************":"",shouldShowHideShowButton:!0,type:"password",value:K.directoryApiKey,onChange:L,onClickCopy:C()})}),(0,D.jsx)(E,{children:(0,D.jsx)(b.Gc,{disabled:d===W,label:"Director Tenant ID",name:"directoryTenantId",value:K.directoryTenantId,onChange:L,onClickCopy:C()})}),(0,D.jsx)(E,{children:(0,D.jsx)(b.Gc,{disabled:d===W,label:"Authorizer Service Address",name:"authorizerServiceUrl",value:K.authorizerServiceUrl,onChange:L,onClickCopy:C()})}),(0,D.jsx)(E,{children:(0,D.jsx)(b.Gc,{disabled:d===W,label:"Authorizer API Key",name:"authorizerApiKey",placeholder:null!==K&&void 0!==K&&K.authorizerApiKey?"****************************************************************":"",shouldShowHideShowButton:!0,type:"password",value:K.authorizerApiKey,onChange:L,onClickCopy:C()})}),(0,D.jsx)(E,{children:(0,D.jsx)(b.Gc,{disabled:d===W,label:"Directory Reader Service Address",name:"directoryReaderServiceUrl",value:K.directoryReaderServiceUrl,onChange:L,onClickCopy:C()})}),(0,D.jsx)(E,{children:(0,D.jsx)(b.Gc,{disabled:d===W,label:"Directory Writer Service Address",name:"directoryWriterServiceUrl",value:K.directoryWriterServiceUrl,onChange:L,onClickCopy:C()})}),(0,D.jsx)(E,{children:(0,D.jsx)(b.Gc,{disabled:d===W,label:"Directory Model Service Address",name:"directoryModelServiceUrl",value:K.directoryModelServiceUrl,onChange:L,onClickCopy:C()})}),(0,D.jsxs)(B,{children:[(0,D.jsx)(b.zx,{onClick:function(){return de({name:r,fields:{configurationType:d,name:r,address:s,directoryServiceUrl:K.directoryServiceUrl,authorizerServiceUrl:K.authorizerServiceUrl,authorizerApiKey:K.authorizerApiKey,directoryApiKey:K.directoryApiKey,directoryTenantId:K.directoryTenantId,directoryReaderServiceUrl:K.directoryReaderServiceUrl,directoryWriterServiceUrl:K.directoryWriterServiceUrl,directoryModelServiceUrl:K.directoryModelServiceUrl}})},children:"Save"}),(0,D.jsx)(b.zx,{variant:"danger",onClick:ie,children:"Delete"})]})]});return(0,D.jsxs)(b.RF,{children:[(0,D.jsx)(E,{children:(0,D.jsx)(b.Gc,{disabled:!0,label:"Configuration Name",value:r,onClickCopy:C()})}),(0,D.jsx)(E,{children:(0,D.jsx)(F,{children:(0,D.jsx)(b.Ph,{label:"Configuration Type",options:te,style:{width:"700px"},value:te.find((function(e){return e.value===d}))||te[0],onChange:function(e){var n=String(null===e||void 0===e?void 0:e.value);n===W&&P(oe),l(n)}})})}),(0,D.jsx)(I,{redirectUrl:"/",show:Q,subject:"Configuration",onClickRemove:function(){!function(e){e&&ce(e)}(r),X(!1)},onHide:function(){return X(!1)}}),(0,D.jsx)(V,{children:d===W?(0,D.jsxs)(V,{children:[d===W&&(0,D.jsxs)(_,{children:[(0,D.jsx)(H,{children:(0,D.jsx)(b.as,{label:"Configuration address",placeholder:"https://localhost:8080",validator:G,value:s,onChange:u,onClickCopy:C()})}),(0,D.jsx)(E,{children:(0,D.jsx)(b.Gc,{label:"API key(required only for an address that has authentication enabled)",shouldShowHideShowButton:!0,type:"password",value:y,onChange:function(e){h(e.target.value)},onClickCopy:C()})}),(0,D.jsxs)(B,{children:[(0,D.jsx)(b.zx,{disabled:!se,onClick:function(){J()},children:"Generate configuration"}),!(null!==$&&void 0!==$&&$.success)&&!(null!==oe&&void 0!==oe&&oe.address)&&(0,D.jsx)(b.zx,{variant:"danger",onClick:ie,children:"Delete"})]})]}),w?ue:(0,D.jsx)(D.Fragment,{})]}):d===N?ue:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(E,{children:(0,D.jsx)(b.Gc,{label:"Directory Service Address",name:"directoryServiceUrl",value:K.directoryServiceUrl,onChange:L,onClickCopy:C()})}),(0,D.jsx)(E,{children:(0,D.jsx)(b.Gc,{label:"Directory API Key",name:"directoryApiKey",shouldShowHideShowButton:!0,type:"password",value:K.directoryApiKey,onChange:L,onClickCopy:C()})}),(0,D.jsx)(E,{children:(0,D.jsx)(b.Gc,{label:"Directory Tenant ID",name:"directoryTenantId",value:K.directoryTenantId,onChange:L,onClickCopy:C()})}),(0,D.jsxs)(B,{children:[(0,D.jsx)(b.zx,{disabled:!K.directoryTenantId||!K.directoryServiceUrl||!K.directoryApiKey,onClick:function(){return de({name:r,fields:{configurationType:d,name:r,directoryServiceUrl:K.directoryServiceUrl,directoryApiKey:K.directoryApiKey,directoryTenantId:K.directoryTenantId}})},children:"Save"}),(0,D.jsx)(b.zx,{variant:"danger",onClick:ie,children:"Delete"})]})]})})]})}},38174:function(e,n,r){r.d(n,{Z:function(){return d}});r(72791);var i=r(87542);var o=r.p+"static/media/no-users.608b3a7e4f53bf42798a4f2a5be4c011.svg",t=r(80184),d=function(){return(0,t.jsx)(i.RF,{children:(0,t.jsx)(i.Pc,{body:'To add one, click the "Add" button in the dropdown .',header:"Could not find any configuration",imgAlt:"Empty Directory",imgSrc:o})})}}}]);
//# sourceMappingURL=5021.e5302d08.chunk.js.map
"use strict";(self.webpackChunkself_hosted_console=self.webpackChunkself_hosted_console||[]).push([[7426],{47426:(e,o,t)=>{function r(e){return null===e?"null":Array.isArray(e)?"array":typeof e}function n(e){return"object"===r(e)}function i(e,o){return e.length<124?e:o}t.d(o,{createClient:()=>y});const a="graphql-transport-ws";var s,c;function l(e){if(!n(e))throw new Error(`Message is expected to be an object, but got ${r(e)}`);if(!e.type)throw new Error("Message is missing the 'type' property");if("string"!==typeof e.type)throw new Error(`Message is expects the 'type' property to be a string, but got ${r(e.type)}`);switch(e.type){case c.ConnectionInit:case c.ConnectionAck:case c.Ping:case c.Pong:if(null!=e.payload&&!n(e.payload))throw new Error(`"${e.type}" message expects the 'payload' property to be an object or nullish or missing, but got "${e.payload}"`);break;case c.Subscribe:if("string"!==typeof e.id)throw new Error(`"${e.type}" message expects the 'id' property to be a string, but got ${r(e.id)}`);if(!e.id)throw new Error(`"${e.type}" message requires a non-empty 'id' property`);if(!n(e.payload))throw new Error(`"${e.type}" message expects the 'payload' property to be an object, but got ${r(e.payload)}`);if("string"!==typeof e.payload.query)throw new Error(`"${e.type}" message payload expects the 'query' property to be a string, but got ${r(e.payload.query)}`);if(null!=e.payload.variables&&!n(e.payload.variables))throw new Error(`"${e.type}" message payload expects the 'variables' property to be a an object or nullish or missing, but got ${r(e.payload.variables)}`);if(null!=e.payload.operationName&&"string"!==r(e.payload.operationName))throw new Error(`"${e.type}" message payload expects the 'operationName' property to be a string or nullish or missing, but got ${r(e.payload.operationName)}`);if(null!=e.payload.extensions&&!n(e.payload.extensions))throw new Error(`"${e.type}" message payload expects the 'extensions' property to be a an object or nullish or missing, but got ${r(e.payload.extensions)}`);break;case c.Next:if("string"!==typeof e.id)throw new Error(`"${e.type}" message expects the 'id' property to be a string, but got ${r(e.id)}`);if(!e.id)throw new Error(`"${e.type}" message requires a non-empty 'id' property`);if(!n(e.payload))throw new Error(`"${e.type}" message expects the 'payload' property to be an object, but got ${r(e.payload)}`);break;case c.Error:if("string"!==typeof e.id)throw new Error(`"${e.type}" message expects the 'id' property to be a string, but got ${r(e.id)}`);if(!e.id)throw new Error(`"${e.type}" message requires a non-empty 'id' property`);if(o=e.payload,!(Array.isArray(o)&&o.length>0&&o.every((e=>"message"in e))))throw new Error(`"${e.type}" message expects the 'payload' property to be an array of GraphQL errors, but got ${JSON.stringify(e.payload)}`);break;case c.Complete:if("string"!==typeof e.id)throw new Error(`"${e.type}" message expects the 'id' property to be a string, but got ${r(e.id)}`);if(!e.id)throw new Error(`"${e.type}" message requires a non-empty 'id' property`);break;default:throw new Error(`Invalid message 'type' property "${e.type}"`)}var o;return e}function p(e,o){return l(e),JSON.stringify(e,o)}!function(e){e[e.InternalServerError=4500]="InternalServerError",e[e.InternalClientError=4005]="InternalClientError",e[e.BadRequest=4400]="BadRequest",e[e.BadResponse=4004]="BadResponse",e[e.Unauthorized=4401]="Unauthorized",e[e.Forbidden=4403]="Forbidden",e[e.SubprotocolNotAcceptable=4406]="SubprotocolNotAcceptable",e[e.ConnectionInitialisationTimeout=4408]="ConnectionInitialisationTimeout",e[e.ConnectionAcknowledgementTimeout=4504]="ConnectionAcknowledgementTimeout",e[e.SubscriberAlreadyExists=4409]="SubscriberAlreadyExists",e[e.TooManyInitialisationRequests=4429]="TooManyInitialisationRequests"}(s||(s={})),function(e){e.ConnectionInit="connection_init",e.ConnectionAck="connection_ack",e.Ping="ping",e.Pong="pong",e.Subscribe="subscribe",e.Next="next",e.Error="error",e.Complete="complete"}(c||(c={}));var d=function(e){return this instanceof d?(this.v=e,this):new d(e)},u=function(e,o,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=t.apply(e,o||[]),i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){n[e]&&(r[e]=function(o){return new Promise((function(t,r){i.push([e,o,t,r])>1||s(e,o)}))})}function s(e,o){try{(t=n[e](o)).value instanceof d?Promise.resolve(t.value.v).then(c,l):p(i[0][2],t)}catch(r){p(i[0][3],r)}var t}function c(e){s("next",e)}function l(e){s("throw",e)}function p(e,o){e(o),i.shift(),i.length&&s(i[0][0],i[0][1])}};function y(e){const{url:o,connectionParams:r,lazy:n=!0,onNonLazyError:y=console.error,lazyCloseTimeout:g=0,keepAlive:h=0,disablePong:w,connectionAckWaitTimeout:b=0,retryAttempts:v=5,retryWait:x=async function(e){let o=1e3;for(let t=0;t<e;t++)o*=2;await new Promise((e=>setTimeout(e,o+Math.floor(2700*Math.random()+300))))},shouldRetry:E=m,isFatalConnectionProblem:S,on:C,webSocketImpl:$,generateID:k=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const o=16*Math.random()|0;return("x"==e?o:3&o|8).toString(16)}))},jsonMessageReplacer:I,jsonMessageReviver:N}=e;let T;if($){if(!("function"===typeof(P=$)&&"constructor"in P&&"CLOSED"in P&&"CLOSING"in P&&"CONNECTING"in P&&"OPEN"in P))throw new Error("Invalid WebSocket implementation provided");T=$}else"undefined"!==typeof WebSocket?T=WebSocket:"undefined"!==typeof t.g?T=t.g.WebSocket||t.g.MozWebSocket:"undefined"!==typeof window&&(T=window.WebSocket||window.MozWebSocket);var P;if(!T)throw new Error("WebSocket implementation missing; on Node you can `import WebSocket from 'ws';` and pass `webSocketImpl: WebSocket` to `createClient`");const A=T,M=(()=>{const e=(()=>{const e={};return{on:(o,t)=>(e[o]=t,()=>{delete e[o]}),emit(o){var t;"id"in o&&(null===(t=e[o.id])||void 0===t||t.call(e,o))}}})(),o={connecting:(null===C||void 0===C?void 0:C.connecting)?[C.connecting]:[],opened:(null===C||void 0===C?void 0:C.opened)?[C.opened]:[],connected:(null===C||void 0===C?void 0:C.connected)?[C.connected]:[],ping:(null===C||void 0===C?void 0:C.ping)?[C.ping]:[],pong:(null===C||void 0===C?void 0:C.pong)?[C.pong]:[],message:(null===C||void 0===C?void 0:C.message)?[e.emit,C.message]:[e.emit],closed:(null===C||void 0===C?void 0:C.closed)?[C.closed]:[],error:(null===C||void 0===C?void 0:C.error)?[C.error]:[]};return{onMessage:e.on,on(e,t){const r=o[e];return r.push(t),()=>{r.splice(r.indexOf(t),1)}},emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(const i of[...o[e]])i(...r)}}})();function q(e){const o=[M.on("error",(t=>{o.forEach((e=>e())),e(t)})),M.on("closed",(t=>{o.forEach((e=>e())),e(t)}))]}let O,R,W=0,j=!1,z=0,B=!1;async function F(){clearTimeout(R);const[e,t]=await(null!==O&&void 0!==O?O:O=new Promise(((e,t)=>(async()=>{if(j){if(await x(z),!W)return O=void 0,t({code:1e3,reason:"All Subscriptions Gone"});z++}M.emit("connecting",j);const n=new A("function"===typeof o?await o():o,a);let d,u;function y(){isFinite(h)&&h>0&&(clearTimeout(u),u=setTimeout((()=>{n.readyState===A.OPEN&&(n.send(p({type:c.Ping})),M.emit("ping",!1,void 0))}),h))}q((e=>{O=void 0,clearTimeout(d),clearTimeout(u),t(e),e instanceof f&&(n.close(4499,"Terminated"),n.onerror=null,n.onclose=null)})),n.onerror=e=>M.emit("error",e),n.onclose=e=>M.emit("closed",e),n.onopen=async()=>{try{M.emit("opened",n);const e="function"===typeof r?await r():r;if(n.readyState!==A.OPEN)return;n.send(p(e?{type:c.ConnectionInit,payload:e}:{type:c.ConnectionInit},I)),isFinite(b)&&b>0&&(d=setTimeout((()=>{n.close(s.ConnectionAcknowledgementTimeout,"Connection acknowledgement timeout")}),b)),y()}catch(e){M.emit("error",e),n.close(s.InternalClientError,i(e instanceof Error?e.message:new Error(e).message,"Internal client error"))}};let m=!1;n.onmessage=o=>{let{data:t}=o;try{const o=function(e,o){return l("string"===typeof e?JSON.parse(e,o):e)}(t,N);if(M.emit("message",o),"ping"===o.type||"pong"===o.type)return M.emit(o.type,!0,o.payload),void("pong"===o.type?y():w||(n.send(p(o.payload?{type:c.Pong,payload:o.payload}:{type:c.Pong})),M.emit("pong",!1,o.payload)));if(m)return;if(o.type!==c.ConnectionAck)throw new Error(`First message cannot be of type ${o.type}`);clearTimeout(d),m=!0,M.emit("connected",n,o.payload,j),j=!1,z=0,e([n,new Promise(((e,o)=>q(o)))])}catch(r){n.onmessage=null,M.emit("error",r),n.close(s.BadResponse,i(r instanceof Error?r.message:new Error(r).message,"Bad response"))}}})())));e.readyState===A.CLOSING&&await t;let n=()=>{};const d=new Promise((e=>n=e));return[e,n,Promise.race([d.then((()=>{if(!W){const o=()=>e.close(1e3,"Normal Closure");isFinite(g)&&g>0?R=setTimeout((()=>{e.readyState===A.OPEN&&o()}),g):o()}})),t])]}function _(e){if(m(e)&&(o=e.code,![1e3,1001,1006,1005,1012,1013,1014].includes(o)&&o>=1e3&&o<=1999||[s.InternalServerError,s.InternalClientError,s.BadRequest,s.BadResponse,s.Unauthorized,s.SubprotocolNotAcceptable,s.SubscriberAlreadyExists,s.TooManyInitialisationRequests].includes(e.code)))throw e;var o;if(B)return!1;if(m(e)&&1e3===e.code)return W>0;if(!v||z>=v)throw e;if(!E(e))throw e;if(null===S||void 0===S?void 0:S(e))throw e;return j=!0}function G(e,o){const t=k(e);let r=!1,n=!1,i=()=>{W--,r=!0};return(async()=>{for(W++;;)try{const[a,s,l]=await F();if(r)return s();const d=M.onMessage(t,(e=>{switch(e.type){case c.Next:return void o.next(e.payload);case c.Error:return n=!0,r=!0,o.error(e.payload),void i();case c.Complete:return r=!0,void i()}}));return a.send(p({id:t,type:c.Subscribe,payload:e},I)),i=()=>{r||a.readyState!==A.OPEN||a.send(p({id:t,type:c.Complete},I)),W--,r=!0,s()},void await l.finally(d)}catch(a){if(!_(a))return}})().then((()=>{n||o.complete()})).catch((e=>{o.error(e)})),()=>{r||i()}}return n||(async()=>{for(W++;;)try{const[,,e]=await F();await e}catch(e){try{if(!_(e))return}catch(e){return null===y||void 0===y?void 0:y(e)}}})(),{on:M.on,subscribe:G,iterate(e){const o=[],t={done:!1,error:null,resolve:()=>{}},r=G(e,{next(e){o.push(e),t.resolve()},error(e){t.done=!0,t.error=e,t.resolve()},complete(){t.done=!0,t.resolve()}}),n=function(){return u(this,arguments,(function*(){for(;;){for(o.length||(yield d(new Promise((e=>t.resolve=e))));o.length;)yield yield d(o.shift());if(t.error)throw t.error;if(t.done)return yield d(void 0)}}))}();return n.throw=async e=>(t.done||(t.done=!0,t.error=e,t.resolve()),{done:!0,value:void 0}),n.return=async()=>(r(),{done:!0,value:void 0}),n},async dispose(){if(B=!0,O){const[e]=await O;e.close(1e3,"Normal Closure")}},terminate(){O&&M.emit("closed",new f)}}}class f extends Error{constructor(){super(...arguments),this.name="TerminatedCloseEvent",this.message="4499: Terminated",this.code=4499,this.reason="Terminated",this.wasClean=!1}}function m(e){return n(e)&&"code"in e&&"reason"in e}}}]);
//# sourceMappingURL=7426.2f21a2b2.chunk.js.map
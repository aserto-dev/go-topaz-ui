"use strict";(self.webpackChunkself_hosted_console=self.webpackChunkself_hosted_console||[]).push([[4557],{46430:function(n,e,t){t.d(e,{GJ:function(){return d},TA:function(){return u},iZ:function(){return c},ld:function(){return l}});var i=t(1413),r=t(91933),a=t(42911),o=t(83136),d=function(n){var e=(0,a.g)().get;return(0,r.useQuery)([o.iP.AuthorizerInstances],(function(){return e({path:"authorizers"})}),(0,i.Z)((0,i.Z)({},n),{},{enabled:null===n||void 0===n?void 0:n.enabled,retry:!1,staleTime:1/0}))},u=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(0,o.Jb)(n),t=(0,a.g)().post,d=(0,r.useQueryClient)();return(0,r.useMutation)([o.ff.AddAuthorizerInstance],(function(n){return t({body:n,path:"authorizers"})}),(0,i.Z)((0,i.Z)({},e),{},{onSuccess:function(n,t){var i;d.invalidateQueries([o.iP.AuthorizerInstances]),d.removeQueries([o.iP.IsAuthorizerInstanceNameAvailable,n.name]),null===e||void 0===e||null===(i=e.onSuccess)||void 0===i||i.call(e,n,t)}}))},l=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(0,r.useQueryClient)(),t=(0,o.Jb)(n,o.iP.PoliciesData),d=(0,a.g)().del;return(0,r.useMutation)((function(n){return d({path:"authorizers/".concat(n)})}),(0,i.Z)((0,i.Z)({},t),{},{onSuccess:function(n,i){var r;e.removeQueries([o.iP.AuthorizerInstances]),null===t||void 0===t||null===(r=t.onSuccess)||void 0===r||r.call(t,n,i)}}))},c=function(n,e){var t=(0,a.g)().get;return(0,r.useQuery)([o.iP.IsAuthorizerInstanceNameAvailable,n],(function(){return t({path:"authorizers/available/".concat(n)})}),(0,i.Z)((0,i.Z)({},e),{},{enabled:!!n&&(null===e||void 0===e?void 0:e.enabled),retry:!1,staleTime:1/0}))}},37669:function(n,e,t){t.d(e,{Z:function(){return j}});var i,r,a,o,d=t(29439),u=t(72791),l=t(59066),c=t(46430),s=function(){return(0,u.useMemo)((function(){var n=function(n,e){var t=(0,c.iZ)(n,{enabled:n!==e});return(0,u.useMemo)((function(){var n,e,i;return{isAvailable:!(null!==t&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.availability)||"NAME_AVAILABILITY_AVAILABLE"===(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.availability),reason:(0,l.AP)(null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.reason)}}),[null===t||void 0===t?void 0:t.data])};return function(e,t){return(0,u.useMemo)((function(){return(0,l.wL)(n)}),[])(e,t)}}),[])},h=/^[a-z][a-z0-9-]{3,29}$/,f=/^[a-z][a-z0-9-]{0,29}$/,p=function(n){return h.test(n)?"VALID":0===n.length||f.test(n)?"VALID_FRAGMENT":"INVALID"},g={getValidityOf:p,isValid:function(n){return"VALID"===p(n)},ruleText:"Start with a letter. Must be 4 to 30 lowercase alphanumeric characters or dashes."},v=t(30168),x=t(91191),m=x.ZP.div(i||(i=(0,v.Z)(["\n  padding: 20px;\n  width: 100%;\n"]))),b=x.ZP.div(r||(r=(0,v.Z)(["\n  margin-top: 18px;\n"]))),Z=x.ZP.div(a||(a=(0,v.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  margin: 12px auto;\n"]))),y=x.ZP.div(o||(o=(0,v.Z)(["\n  width: 100%;\n  flex: 1 1 0%;\n  justify-content: flex-end;\n  align-items: flex-end;\n  float: right;\n  display: flex;\n  margin-top: 20px;\n  button:first-of-type {\n    margin-right: 10px;\n  }\n"]))),w=t(80184),j=function(n){var e=n.authorizerInstance,t=n.show,i=n.onHide,r=(0,u.useState)(""),a=(0,d.Z)(r,2),o=a[0],h=a[1],f=(0,u.useState)(""),p=(0,d.Z)(f,2),v=p[0],x=p[1],j=(0,u.useState)(""),z=(0,d.Z)(j,2),A=z[0],P=z[1],I=function(){h(""),x(""),P("")},k=(0,l.dV)(),C=(0,c.TA)({onError:function(n){k(n)}}).mutate;return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(l.AY,{cardHeight:"100%",show:t,title:"Connect an authorizer",onHide:function(){I(),i()},children:(0,w.jsxs)(m,{className:"add-a-authorizer-modal-content",children:[(0,w.jsx)("div",{children:"Provide a unique name and click the Add button."}),(0,w.jsxs)(b,{children:[(0,w.jsx)(Z,{children:(0,w.jsx)(l.as,{autoFocus:!0,defaultValue:null===e||void 0===e?void 0:e.name,disabled:!(null===e||void 0===e||!e.name),label:"Instance Name",useIsAvailable:s(),validator:g,value:null===e||void 0===e?void 0:e.name,onChange:function(n){return h(n||"")}})}),(0,w.jsx)(Z,{children:(0,w.jsx)(l.as,{label:"Instance URL",value:null===e||void 0===e?void 0:e.url,onChange:function(n){return x(n||"")}})}),(0,w.jsx)(Z,{children:(0,w.jsx)(l.as,{label:"API Key (Optional)",type:"password",value:null===e||void 0===e?void 0:e.apiKey,onChange:function(n){return P(n||"")}})})]}),(0,w.jsxs)(y,{children:[(0,w.jsx)(l.zx,{"data-testid":"cancel-btn",variant:"secondary",onClick:function(){I(),i()},children:"Cancel"}),(0,w.jsx)(l.zx,{"data-testid":"add-authorizer-modal-btn",disabled:""===o||""===v,id:"add-authorizer",type:"submit",onClick:function(){i(),C({name:o,url:v,apiKey:A})},children:"Save"})]})]})})})}},94557:function(n,e,t){t.r(e),t.d(e,{default:function(){return k}});var i=t(29439),r=t(72791),a=t(59066),o=t(46430),d=t(30168),u=t(91191);var l,c,s,h,f,p,g,v=t.p+"static/media/edge-authorizer-logo.b6aa92e6ceff9a4b8788311727d9f9c2.svg",x=t(80184),m=u.ZP.div(l||(l=(0,d.Z)(["\n  border-radius: 6px;\n  display: flex;\n  flex-direction: column;\n  height: ",";\n  ",";\n  background-color: ",";\n  position: relative;\n"])),(function(n){var e=n.height;return n.$fullHeight?"100%":e?"".concat(e,"px"):""}),(function(n){var e=n.width;return e?"width: ".concat(e,"px"):"width: 100%"}),(function(n){return n.theme.grey10})),b=u.ZP.div(c||(c=(0,d.Z)(["\n  border-top-left-radius: 6px;\n  border-top-right-radius: 6px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 10px;\n  font-size: 24px;\n  font-weight: 500;\n  font-family: 'Roboto', sans-serif;\n  ","\n"])),(function(n){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"primary",e=arguments.length>1?arguments[1]:void 0,t="background-color: ".concat(e.mojo50,"; color: ").concat(e.fullWhite);return{primary:"color: ".concat(e.grey100,"; background-color: ").concat(e.grey20,";"),danger:"".concat(t,"; border-bottom: 1px solid ").concat(e.grey50),delete_danger:"".concat(t,"; border-bottom: 0px solid ").concat(e.grey50)}[n]}(n.$variant,n.theme)})),Z=u.ZP.div(s||(s=(0,d.Z)(["\n  color: ",";\n  font-weight: ",";\n  ",";\n  font-size: 18px;\n"])),(function(n){return n.theme.grey70}),(function(n){return n.bold?"bold":500}),(function(n){return n.isInModal?"  padding: 0px 20px 20px;":"padding: 20px"})),y=u.ZP.div(h||(h=(0,d.Z)(["\n  background-color: ",";\n  height: 100%;\n  ",";\n  position: absolute;\n  opacity: 0.75;\n  z-index: 2;\n"])),(function(n){return n.theme.primaryBlack}),(function(n){var e=n.width;return e?"width: ".concat(e,"px"):"width: 100%"})),w=u.ZP.img(f||(f=(0,d.Z)(["\n  height: 80px;\n  width: 80px;\n  margin-right: 20px;\n"]))),j=u.ZP.div(p||(p=(0,d.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  &:first-child {\n    margin: auto;\n    width: 100%;\n    padding: 20px;\n  }\n"]))),z=u.ZP.span(g||(g=(0,d.Z)(["\n  margin-left: 10px;\n"]))),A=function(n){var e=n.title,t=n.text,i=n.height,r=n.inactive,o=n.width,d=n.style,u=n.variant,l=n.fullHeight,c=n.testId,s=n.body;return(0,x.jsx)(a.wv,{to:"/ui/authorizers/".concat(e,"/settings"),children:(0,x.jsxs)(m,{$fullHeight:l,"data-testid":c,height:i,style:d,width:o,children:[r&&(0,x.jsx)(y,{height:i,width:o}),e&&(0,x.jsxs)(b,{$variant:u,children:[(0,x.jsx)(z,{children:e})," ",(0,x.jsx)(w,{src:v})]}),"string"===typeof t?(0,x.jsx)(Z,{$variant:u,children:t}):t,s&&(0,x.jsx)(j,{children:s})]})})},P=t(37669),I=t(68389),k=function(){var n=(0,o.GJ)().data,e=(0,r.useMemo)((function(){return(null===n||void 0===n?void 0:n.results)||[]}),[null===n||void 0===n?void 0:n.results]),t=(0,r.useState)(!1),d=(0,i.Z)(t,2),u=d[0],l=d[1];return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(I.h4,{children:(0,x.jsx)(a.mr,{hasBorderBottom:!0,mobileBreakpoint:912,title:"Authorizers",children:(0,x.jsxs)(a.g,{children:[(0,x.jsx)(P.Z,{show:u,onHide:function(){return l(!1)}}),(0,x.jsx)(a.zx,{"data-testid":"add-authorizer-btn",id:"add-a-authorizer",onClick:function(){l(!0)},children:"Connect an Authorizer"})]})})}),(0,x.jsx)(a.RF,{paddingTop:140,children:(0,x.jsx)(I.gy,{children:e.map((function(n){return(0,x.jsx)(A,{fullHeight:!0,text:n.url,title:n.name},n.name)}))})})]})}},68389:function(n,e,t){t.d(e,{VY:function(){return f},YE:function(){return h},gy:function(){return p},h4:function(){return s},rj:function(){return c}});var i,r,a,o,d,u=t(30168),l=t(91191),c=l.ZP.div(i||(i=(0,u.Z)(["\n  width: 100%;\n  height: 100%;\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-template-rows: 100px 85px 1fr;\n  gap: 0px 0px;\n  grid-template-areas:\n    'header'\n    'sidebar'\n    'content';\n\n  @media (min-width: 1px) {\n  }\n\n  @media (min-width: 1328px) {\n    display: grid;\n    grid-template-columns: 250px 1.3fr 1fr;\n    grid-template-rows: 100px 1.7fr 1fr;\n    gap: 0px 0px;\n    grid-template-areas:\n      'header header header'\n      'sidebar content content'\n      'sidebar content content';\n  }\n  .decision-logs-content {\n    height: 100%;\n    overflow-x: hidden;\n  }\n"]))),s=l.ZP.div(r||(r=(0,u.Z)(["\n  @media (min-width: 1328px) {\n    grid-area: header;\n  }\n"]))),h=l.ZP.div(a||(a=(0,u.Z)(["\n  @media (min-width: 1328px) {\n    grid-area: sidebar;\n  }\n"]))),f=l.ZP.div(o||(o=(0,u.Z)(["\n  grid-area: content;\n  display: flex;\n  height: 100%;\n  width: 100%;\n"]))),p=l.ZP.div(d||(d=(0,u.Z)(["\n  padding: 40px;\n  display: grid;\n  grid-template-columns: repeat(auto-fit, 426px);\n  grid-template-rows: repeat(auto-fit, 164px);\n  gap: 20px;\n  @media (max-width: 500px) {\n    grid-template-rows: repeat(auto-fit, 91px);\n    grid-template-columns: 1fr;\n  }\n"])))}}]);
//# sourceMappingURL=4557.b44e5cfb.chunk.js.map
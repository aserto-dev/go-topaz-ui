"use strict";(self.webpackChunkself_hosted_console=self.webpackChunkself_hosted_console||[]).push([[5226],{65226:(e,r,i)=>{i.r(r),i.d(r,{default:()=>I});var o=i(75270),n=i.n(o),t=i(65043),l=i(73216),d=i(30818),a=i(82907);var c=i(64214),s=i(15617);const u=s.Ay.div`
  padding: 20px;
  width: 100%;
  height: fit-content;
`,y=s.Ay.div`
  font-size: 16px;
`,v=s.Ay.div`
  width: 100%;
  flex: 1 1 0%;
  justify-content: flex-start;
  align-items: flex-start;
  float: right;
  display: flex;
  margin-top: 60px;
  button:first-of-type {
    margin-right: 10px;
  }
`;var h=i(70579);const f=e=>{let{onHide:r,show:i,subject:o,onClickRemove:n}=e;const t=r;return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(d.oV,{cardHeight:"100%",show:i,title:`Delete ${o}`,variant:"delete_danger",onHide:t,children:(0,h.jsxs)(u,{children:[(0,h.jsxs)(y,{children:["Are you sure you want to delete your ",o,"?"]}),(0,h.jsxs)(v,{children:[(0,h.jsx)(d.$n,{variant:"secondary",onClick:t,children:"Cancel"}),(0,h.jsx)(d.$n,{"data-testid":"delete-subject",variant:"danger",onClick:n,children:"Delete"})]})]})})})},p=/^(https?:\/\/[a-zA-Z0-9.-]+:\d+(\/[a-zA-Z0-9_/]+)?)$/,x=e=>p.test(e)?"VALID":"INVALID",g={getValidityOf:x,isValid:e=>"VALID"===x(e),ruleText:"Should be formed of an address and a port from topaz. It can be either https or http."};var C=i(70316),j=i(95288);const S=s.Ay.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  margin: 1rem 6rem;
  input {
    width: 700px;
  }
  label {
    font-size: 14px;
  }
`,m=(0,s.Ay)(S)`
  margin: 0rem 6rem;
`,A=s.Ay.div`
  margin-top: 2rem;
`,b=s.Ay.div`
  margin-bottom: 60px;
`,D=s.Ay.div`
  margin-top: 12px;
  display: flex;
  margin-left: 100px;
  gap: 10px;
`,k=s.Ay.div`
  width: 700px;
`,U="auto",w="manual",I=()=>{const{data:e}=(0,c._r)(),{configurationName:r,setConfigurationName:i}=(0,C.Rh)(),[o,s]=(0,t.useState)(U),[u,y]=(0,t.useState)(""),[v,p]=(0,t.useState)(""),[x,I]=(0,t.useState)(!1),[T,z]=(0,t.useState)({authorizerServiceUrl:"",authorizerApiKey:"",directoryServiceUrl:"",directoryApiKey:"",directoryTenantId:"",directoryReaderServiceUrl:"",directoryWriterServiceUrl:"",directoryModelServiceUrl:""}),K=e=>{const{name:r,value:i}=e.target;z((e=>({...e,[r]:i})))},[$,E]=(0,t.useState)(!1),{data:M,refetch:R}=((e,r,i)=>{const{get:o}=(0,d.tW)(e);return(0,a.useQuery)([e],(()=>o({path:"",headerOverrides:r?{authorization:`Basic ${r}`}:void 0})),{...i,enabled:!!e&&(null===i||void 0===i?void 0:i.enabled),retry:!1,staleTime:1/0})})(u,v,{enabled:!1,onError:e=>{V(e)},onSuccess:()=>{W("Configuration generated successfully.")}}),H=(0,l.zy)(),V=(0,d.$X)(),W=(0,d.Xc)(),_=()=>{E(!0)},B=(0,t.useMemo)((()=>{var i;return null===e||void 0===e||null===(i=e.configs)||void 0===i?void 0:i.find((e=>e.name===r))}),[r,null===e||void 0===e?void 0:e.configs]),O=[{label:"Automatic",value:U},{label:"Manual",value:w},{label:"Central Directory",value:"central_directory"}],{mutate:F}=(0,c.R4)({onError:e=>{V(e)},onSuccess:()=>{W("Configuration updated successfully.")}}),{mutateAsync:N}=(0,c.WV)({onSuccess:()=>{var o,n;W("Configuration deleted successfully.");const t=null===(o=((null===e||void 0===e||null===(n=e.configs)||void 0===n?void 0:n.filter((e=>e.name!==r)))||[])[0])||void 0===o?void 0:o.name;i(t||"")},onError:e=>{V(e)}}),P=(0,t.useMemo)((()=>(null===M||void 0===M?void 0:M.configs)||[]),[null===M||void 0===M?void 0:M.configs]),L=(0,t.useMemo)((()=>g.isValid(u)),[u]);if((0,t.useEffect)((()=>{null!==B&&void 0!==B&&B.configurationType&&s(null===B||void 0===B?void 0:B.configurationType)}),[null===B||void 0===B?void 0:B.configurationType,s]),(0,t.useEffect)((()=>{B&&z(B)}),[B,z]),(0,t.useEffect)((()=>{null!==B&&void 0!==B&&B.address&&y(B.address)}),[,null===B||void 0===B?void 0:B.address,y]),(0,t.useEffect)((()=>{P.length>0&&(z(P[0]),I(!0))}),[P,z,I]),(0,t.useEffect)((()=>{var e,r;null!==(e=H.state)&&void 0!==e&&e.configuration&&Object.keys(B||{}).sort().toString()===["name"].toString()&&(s(U),y(""),p(""),I(!1),z(null===(r=H.state)||void 0===r?void 0:r.configuration))}),[H.state,z,s,y,I,B]),(0,t.useEffect)((()=>{null!==B&&void 0!==B&&B.address&&I(!0)}),[null===B||void 0===B?void 0:B.address,I]),!e||!e.configs||0===e.configs.length)return(0,h.jsx)(j.A,{});const X=(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(S,{children:(0,h.jsx)(d.Df,{disabled:o===U,label:"Directory Service Address",name:"directoryServiceUrl",value:T.directoryServiceUrl,onChange:K,onClickCopy:n()})}),(0,h.jsx)(S,{children:(0,h.jsx)(d.Df,{disabled:o===U,label:"Directory API Key",name:"directoryApiKey",placeholder:null!==T&&void 0!==T&&T.directoryApiKey?"****************************************************************":"",shouldShowHideShowButton:!0,type:"password",value:T.directoryApiKey,onChange:K,onClickCopy:n()})}),(0,h.jsx)(S,{children:(0,h.jsx)(d.Df,{disabled:o===U,label:"Director Tenant ID",name:"directoryTenantId",value:T.directoryTenantId,onChange:K,onClickCopy:n()})}),(0,h.jsx)(S,{children:(0,h.jsx)(d.Df,{disabled:o===U,label:"Authorizer Service Address",name:"authorizerServiceUrl",value:T.authorizerServiceUrl,onChange:K,onClickCopy:n()})}),(0,h.jsx)(S,{children:(0,h.jsx)(d.Df,{disabled:o===U,label:"Authorizer API Key",name:"authorizerApiKey",placeholder:null!==T&&void 0!==T&&T.authorizerApiKey?"****************************************************************":"",shouldShowHideShowButton:!0,type:"password",value:T.authorizerApiKey,onChange:K,onClickCopy:n()})}),(0,h.jsx)(S,{children:(0,h.jsx)(d.Df,{disabled:o===U,label:"Directory Reader Service Address",name:"directoryReaderServiceUrl",value:T.directoryReaderServiceUrl,onChange:K,onClickCopy:n()})}),(0,h.jsx)(S,{children:(0,h.jsx)(d.Df,{disabled:o===U,label:"Directory Writer Service Address",name:"directoryWriterServiceUrl",value:T.directoryWriterServiceUrl,onChange:K,onClickCopy:n()})}),(0,h.jsx)(S,{children:(0,h.jsx)(d.Df,{disabled:o===U,label:"Directory Model Service Address",name:"directoryModelServiceUrl",value:T.directoryModelServiceUrl,onChange:K,onClickCopy:n()})}),(0,h.jsxs)(D,{children:[(0,h.jsx)(d.$n,{onClick:()=>F({name:r,fields:{configurationType:o,name:r,address:u,directoryServiceUrl:T.directoryServiceUrl,authorizerServiceUrl:T.authorizerServiceUrl,authorizerApiKey:T.authorizerApiKey,directoryApiKey:T.directoryApiKey,directoryTenantId:T.directoryTenantId,directoryReaderServiceUrl:T.directoryReaderServiceUrl,directoryWriterServiceUrl:T.directoryWriterServiceUrl,directoryModelServiceUrl:T.directoryModelServiceUrl}}),children:"Save"}),(0,h.jsx)(d.$n,{variant:"danger",onClick:_,children:"Delete"})]})]});return(0,h.jsxs)(d.hO,{children:[(0,h.jsx)(S,{children:(0,h.jsx)(d.Df,{disabled:!0,label:"Configuration Name",value:r,onClickCopy:n()})}),(0,h.jsx)(S,{children:(0,h.jsx)(k,{children:(0,h.jsx)(d.l6,{label:"Configuration Type",options:O,style:{width:"700px"},value:O.find((e=>e.value===o))||O[0],onChange:e=>{const r=String(null===e||void 0===e?void 0:e.value);r===U&&z(B),s(r)}})})}),(0,h.jsx)(f,{redirectUrl:"/",show:$,subject:"Configuration",onClickRemove:()=>{(e=>{e&&N(e)})(r),E(!1)},onHide:()=>E(!1)}),(0,h.jsx)(A,{children:o===U?(0,h.jsxs)(A,{children:[o===U&&(0,h.jsxs)(b,{children:[(0,h.jsx)(m,{children:(0,h.jsx)(d.DI,{label:"Configuration address",placeholder:"https://localhost:8080",validator:g,value:u,onChange:y,onClickCopy:n()})}),(0,h.jsx)(S,{children:(0,h.jsx)(d.Df,{label:"API key(required only for an address that has authentication enabled)",shouldShowHideShowButton:!0,type:"password",value:v,onChange:e=>{p(e.target.value)},onClickCopy:n()})}),(0,h.jsxs)(D,{children:[(0,h.jsx)(d.$n,{disabled:!L,onClick:()=>{R()},children:"Generate configuration"}),!(null!==M&&void 0!==M&&M.success)&&!(null!==B&&void 0!==B&&B.address)&&(0,h.jsx)(d.$n,{variant:"danger",onClick:_,children:"Delete"})]})]}),x?X:(0,h.jsx)(h.Fragment,{})]}):o===w?X:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(S,{children:(0,h.jsx)(d.Df,{label:"Directory Service Address",name:"directoryServiceUrl",value:T.directoryServiceUrl,onChange:K,onClickCopy:n()})}),(0,h.jsx)(S,{children:(0,h.jsx)(d.Df,{label:"Directory API Key",name:"directoryApiKey",shouldShowHideShowButton:!0,type:"password",value:T.directoryApiKey,onChange:K,onClickCopy:n()})}),(0,h.jsx)(S,{children:(0,h.jsx)(d.Df,{label:"Directory Tenant ID",name:"directoryTenantId",value:T.directoryTenantId,onChange:K,onClickCopy:n()})}),(0,h.jsxs)(D,{children:[(0,h.jsx)(d.$n,{disabled:!T.directoryTenantId||!T.directoryServiceUrl||!T.directoryApiKey,onClick:()=>F({name:r,fields:{configurationType:o,name:r,directoryServiceUrl:T.directoryServiceUrl,directoryApiKey:T.directoryApiKey,directoryTenantId:T.directoryTenantId}}),children:"Save"}),(0,h.jsx)(d.$n,{variant:"danger",onClick:_,children:"Delete"})]})]})})]})}},95288:(e,r,i)=>{i.d(r,{A:()=>l});i(65043);var o=i(30818);const n=i.p+"static/media/no-users.608b3a7e4f53bf42798a4f2a5be4c011.svg";var t=i(70579);const l=()=>(0,t.jsx)(o.hO,{children:(0,t.jsx)(o.fi,{body:'To add one, click the "Add" button in the dropdown .',header:"Could not find any configuration",imgAlt:"Empty Directory",imgSrc:n})})}}]);
//# sourceMappingURL=5226.901b406c.chunk.js.map